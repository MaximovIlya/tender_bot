# Система контроля доступа к тендерам

## Описание

Добавлена система контроля доступа к тендерам, которая позволяет организаторам выбирать, какие компании могут видеть и участвовать в конкретных тендерах.

## Новые возможности

### Для организаторов:
1. **Управление доступом** - новая кнопка в меню организатора
2. **Выбор тендера** - возможность выбрать любой из своих тендеров
3. **Выбор поставщиков** - интерактивный список всех зарегистрированных поставщиков
4. **Переключение доступа** - простой клик для предоставления/отзыва доступа

### Для поставщиков:
1. **Фильтрация тендеров** - видят только те тендеры, к которым у них есть доступ
2. **Уведомления** - получают информацию о том, что у них нет доступа к тендеру
3. **Обращение к организатору** - система подсказывает обратиться к организатору для получения доступа

## Как использовать

### Для организатора:

1. **Создайте тендер** как обычно
2. **Нажмите "Управление доступом"** в главном меню
3. **Выберите тендер** из списка ваших тендеров
4. **Выберите поставщиков** - нажмите на компанию, чтобы предоставить/отозвать доступ
   - ✅ - доступ предоставлен
   - ❌ - доступ не предоставлен
5. **Нажмите "Завершить настройку"** когда закончите

### Для поставщика:

1. **Нажмите "Активные тендеры"** как обычно
2. **Увидите только доступные тендеры** - система автоматически фильтрует
3. **Если нет доступных тендеров** - получите сообщение с предложением обратиться к организатору

## Технические детали

### Новая таблица в базе данных:
```sql
CREATE TABLE tender_access (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    tender_id INTEGER NOT NULL,
    supplier_id INTEGER NOT NULL,
    granted_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (tender_id) REFERENCES tenders (id),
    FOREIGN KEY (supplier_id) REFERENCES users (id)
);
```

### Обновленные запросы:
- Все запросы тендеров для поставщиков теперь включают проверку доступа
- Добавлены проверки доступа во всех функциях участия в тендерах

## Обновление базы данных

Для применения изменений выполните:

```bash
python update_database.py
```

Этот скрипт создаст новую таблицу `tender_access` в существующей базе данных.

## Безопасность

- Организаторы могут управлять доступом только к своим тендерам
- Поставщики не могут обойти систему доступа
- Все проверки доступа выполняются на уровне базы данных
- Логирование всех изменений доступа

## Обратная совместимость

- Существующие тендеры остаются без изменений
- Старые функции продолжают работать
- Новые поставщики по умолчанию не имеют доступа к тендерам (нужно явно предоставить)
